(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"100":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var r=n(89),o=n(4);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var a=function SetPlayStatusAction(e){return console.log("isPlay",e),{"type":o.f,"payload":e}},i=function GetPlayListAction(e){return t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t){var n,a,i;return regeneratorRuntime.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.songModel.GetMusicDetail(e);case 2:n=c.sent,a=n.playlist,i={"type":o.e,"payload":a},t(i);case 6:case"end":return c.stop()}},_callee,void 0)})),function(e){return t.apply(this,arguments)};var t},c=function SetCurrentIndexAction(e){return{"type":o.b,"payload":e}}},"116":function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(11),i=n(117),c=n(130),s=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var l=function(e){function MyIcon(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MyIcon),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(MyIcon.__proto__||Object.getPrototypeOf(MyIcon)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(MyIcon,o["a"].Component),s(MyIcon,[{"key":"render","value":function render(){return r.j.createElement(a.a,{"style":{"display":"flex","alignItems":"center"}},r.j.createElement(c.a,{"value":this.props.value,"size":this.props.size,"color":this.props.color}),r.j.createElement(i.a,null,this.props.text))}}]),MyIcon}();t.a=l},"150":function(e,t,n){e.exports={"song_disc":"index-module__song_disc___4FnfY","song_disc_img":"index-module__song_disc_img___2o99_","song_cover_container":"index-module__song_cover_container___-Et0m","song_cover_content":"index-module__song_cover_content___2CwFO","song_cover_line":"index-module__song_cover_line___a3Iix","song_record":"index-module__song_record___3Embc","move":"index-module__move___176W6","musicAnimate":"index-module__musicAnimate___2BMFP","song_record_cover":"index-module__song_record_cover___3IS4A","song_cover_img":"index-module__song_cover_img___1lfwi","music_control_wrapper":"index-module__music_control_wrapper___JLAnA","music_control_progress":"index-module__music_control_progress___1P9QR","time":"index-module__time___j4gR_","music_control_content":"index-module__music_control_content___2kU-u","song_item":"index-module__song_item___b2joL"}},"158":function(e,t,n){"use strict";n.r(t);var r,o=n(0),a=n(115),i=n(166),c=n(2),s=n(11),l=n(127),u=n(117),p=n(160),d=n(116),f=n(159),_=n(168),y=n(164),m=n(150),h=n.n(m),g=n(21),v=n(91),b=n(100),j=n(89),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),x=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};var w=Object(g.b)(function(e){var t=e.player,n=t.currentIndex,r=t.playList;return{"currentIndex":n,"playStatus":t.playStatus,"playList":r}},function(e){return{"asyncSetCurrentIndex":function asyncSetCurrentIndex(t){e(Object(b.b)(t))},"asyncSetPlayStatus":function asyncSetPlayStatus(t){e(Object(b.c)(t))}}})(r=function(e){function MyPlayer(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MyPlayer);var n,r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(MyPlayer.__proto__||Object.getPrototypeOf(MyPlayer)).call(this,e));return r.config={"navigationBarTitleText":"加载中..."},r.startSong=function(e,t){var n=r.props,o=n.playList,i=n.currentIndex,c=n.asyncSetCurrentIndex;t!=i&&c(t),r.getSongUrl(e).then(function(e){r.setState({"currentSong":P({},o.tracks[t],{"url":e})},function(){Object(a.a)({"title":r.state.currentSong.name}),console.log(r.state.currentSong),r.setState({"isPlay":!0},function(){r.refs.audio.play()})})})},r.getSongUrl=(n=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(e){var n,r;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.songModel.GetSongUrl({"id":e});case 2:return n=t.sent,r=n.data,t.abrupt("return",r[0].url);case 5:case"end":return t.stop()}},_callee,t)})),function(e){return n.apply(this,arguments)}),r.handleReady=function(){r.setState({"isReady":!0})},r.handleError=function(){console.log(1),r.setState({"isReady":!0})},r.handleEnd=function(){"loop"===r.state.playModel?(r.refs.audio.currentTime=0,r.refs.audio.play()):r.handleNext()},r.handleUpdateTime=function(e){r.setState({"currentTime":e.target.currentTime})},r.changeMusic=function(e){var t=r.props.playList.tracks[e].id;r.startSong(t,e)},r.togglePlay=function(){r.state.isReady&&r.setState({"isPlay":!r.state.isPlay},function(){r.state.isPlay?r.refs.audio.play():r.refs.audio.pause()})},r.handleNext=function(){if(r.state.isReady){var e=r.props,t=e.playList.tracks,n=e.currentIndex;e.asyncSetCurrentIndex;"random"===r.state.playModel?n=r.getDiffRandom(n,t.length):n===t.length-1?n=0:++n;var o=t[n].id;r.startSong(o,n),r.setState({"isReady":!1})}},r.handlePrev=function(){if(r.state.isReady){var e=r.props,t=e.playList.tracks,n=e.currentIndex;e.asyncSetCurrentIndex;"random"===r.state.playModel?n=r.getDiffRandom(n,t.length):0===n?n=t.length-1:--n;var o=t[n].id;r.startSong(o,n),r.setState({"isReady":!1})}},r.changeModel=function(){switch(r.state.playModel){case"order":r.setState({"playModel":"loop","playModelIcon":"reload"},function(){Object(i.c)({"title":"循环播放","icon":"none"})});break;case"loop":r.setState({"playModel":"random","playModelIcon":"shuffle-play"},function(){Object(i.c)({"title":"随机播放","icon":"none"})});break;case"random":r.setState({"playModel":"order","playModelIcon":"repeat-play"},function(){Object(i.c)({"title":"顺序播放","icon":"none"})})}},r.getDiffRandom=function(e,t){var n=~~(Math.random()*t);return n==e?r.getDiffRandom(e,t):n},r.changeProgress=function(e){var t=e.value;r.refs.audio.currentTime=t,r.setState({"currentTime":t}),console.log(t)},r.showPlayList=function(){r.setState({"isShowPlayList":!r.state.isShowPlayList})},r.state={"isPlay":!1,"currentTime":0,"time":null,"isFirst":!0,"isReady":!1,"isShowPlayList":!1,"currentSong":{},"playModelIcon":"repeat-play","playModel":"loop"},r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(MyPlayer,c["a"].Component),S(MyPlayer,[{"key":"componentDidMount","value":function componentDidMount(){var e=this.$router.params.id;this.startSong(e,this.props.currentIndex)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){var e=this.state.isPlay?"play":"pause";this.props.asyncSetPlayStatus(e)}},{"key":"render","value":function render(){var e=this,t=this.props.currentIndex,n=this.state.currentSong;if(n.al)return o.j.createElement(s.a,null,o.j.createElement(f.a,{"onClickRgIconSt":this.handleClick,"onClickRgIconNd":this.handleClick,"onClickLeftIcon":this.handleClick,"color":"#000","title":"NavBar 导航栏示例","leftText":"返回","rightFirstIconType":"bullet-list","rightSecondIconType":"user"}),o.j.createElement("audio",{"src":n.url,"ref":"audio","onCanPlay":this.handleReady,"onEnded":this.handleEnd,"onError":this.handleError,"onTimeUpdate":this.handleUpdateTime}),o.j.createElement(s.a,{"className":h.a.song_disc},o.j.createElement(l.a,{"src":n.al.picUrl,"className":h.a.song_disc_img}),o.j.createElement(s.a,{"className":h.a.song_cover_container},o.j.createElement(s.a,{"className":h.a.song_cover_content},o.j.createElement(s.a,{"className":h.a.song_cover_line}),o.j.createElement(s.a,{"className":h.a.song_record},o.j.createElement(s.a,{"className":[h.a.song_record_cover,this.state.isPlay?h.a.move:""]},o.j.createElement(l.a,{"src":n.al.picUrl,"className":h.a.song_cover_img}))))),o.j.createElement(s.a,{"className":h.a.music_control_wrapper},o.j.createElement(s.a,{"className":h.a.music_control_progress},o.j.createElement(u.a,{"className":h.a.time},Object(v.b)(this.state.currentTime)),o.j.createElement(_.a,{"step":1,"max":n.dt/1e3,"value":this.state.currentTime,"activeColor":"#d44439","backgroundColor":"#BDBDBD","blockColor":"#d44439","blockSize":2,"onChange":this.changeProgress}),o.j.createElement(u.a,{"className":h.a.time},Object(v.b)(n.dt/1e3))),o.j.createElement(s.a,{"className":h.a.music_control_content},o.j.createElement(s.a,{"onClick":this.changeModel},o.j.createElement(d.a,{"value":this.state.playModelIcon,"color":"#fff"})),o.j.createElement(s.a,{"onClick":this.handlePrev},o.j.createElement(d.a,{"value":"prev","color":"#fff"})),o.j.createElement(s.a,{"onClick":function onClick(){e.togglePlay()}},this.state.isPlay?o.j.createElement(d.a,{"value":"pause","color":"#fff","size":"40"}):o.j.createElement(d.a,{"value":"play","color":"#fff","size":"40"})),o.j.createElement(s.a,{"onClick":this.handleNext},o.j.createElement(d.a,{"value":"next","color":"#fff"})),o.j.createElement(s.a,{"onClick":this.showPlayList},o.j.createElement(y.a,{"isOpened":this.state.isShowPlayList,"cancelText":"关闭","title":"播放列表"},o.j.createElement(s.a,null,o.j.createElement(p.a,{"scrollY":!0,"scrollWithAnimation":!0,"style":{"height":"60vh"}},this.props.playList.tracks.map(function(n,r){return o.j.createElement(s.a,{"key":n.id,"className":h.a.song_item,"onClick":function onClick(){e.changeMusic(r)}},o.j.createElement(s.a,{"style":{"display":"flex","alignItems":"center"}},r===t?o.j.createElement(d.a,{"value":"volume-plus","color":"#d44439"}):"",o.j.createElement(s.a,null,n.name,o.j.createElement(u.a,{"style":{"color":"#ccc","fontSize":"10px"}},"-",n.ar[0].name))),o.j.createElement(d.a,{"value":"close","size":"10"}))})))),o.j.createElement(d.a,{"value":"playlist","color":"#fff"}))))))}},{"key":"componentDidShow","value":function componentDidShow(){x(MyPlayer.prototype.__proto__||Object.getPrototypeOf(MyPlayer.prototype),"componentDidShow",this)&&x(MyPlayer.prototype.__proto__||Object.getPrototypeOf(MyPlayer.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){x(MyPlayer.prototype.__proto__||Object.getPrototypeOf(MyPlayer.prototype),"componentDidHide",this)&&x(MyPlayer.prototype.__proto__||Object.getPrototypeOf(MyPlayer.prototype),"componentDidHide",this).call(this)}}]),MyPlayer}())||r;t.default=w},"89":function(e,t,n){"use strict";var r=n(156);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var o,a,i=function request(e,t,n){return new Promise(function(o,a){Object(r.a)({"url":"http://49.235.18.58:7700/"+e,"data":n,"method":t,"header":{"content-type":"application/json"},"success":function success(e){o(e.data)}})})},c=(o=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(e,"GET",n);case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},_callee,void 0)})),function get(e){return o.apply(this,arguments)}),s=(a=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(e,"POST",n);case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},_callee2,void 0)})),{"GetMusicDetail":function GetMusicDetail(e){return c("playlist/detail",e)},"GetSongDetail":function GetSongDetail(e){return c("song/detail",e)},"GetSongUrl":function GetSongUrl(e){return c("song/url",e)}}),l={"GetHotList":function GetHotList(e){return c("search/hot/detail",e)},"GetSuggestList":function GetSuggestList(e){return c("search/suggest",e)}},u={"GetBannerList":function GetBannerList(){return c("banner")},"GetRecommendList":function GetRecommendList(){return c("personalized")}},p={"GetUserInfo":function GetUserInfo(e){return c("login/cellphone",params)}};t.a={"songModel":s,"searchModel":l,"homeModel":u,"userModel":p}},"91":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=function countFilter(e){var t=e/1e8,n=e/1e4;return t>1?t.toFixed(1)+"亿":n>1?n.toFixed(1)+"万":e},o=function timeFilter(e){return(~~((e=~~e)%3600/60)).toString().padStart(2,"0")+":"+(e%3600%60).toString().padStart(2,"0")}}}]);